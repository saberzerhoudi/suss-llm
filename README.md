# SussLLM: Simulated User Search Sessions with Large Language Models


Source code for our paper :  
***SussLLM: Simulated User Search Sessions with Large Language Models***


<div align="center" style="margin: 10px 0 30px; padding: 10px; color: #856404; background-color: #fff3cd; border: 1px solid #ffeeba; border-radius: .25rem;">

### ðŸš§ Repository Update In Progress ðŸš§

We are currently refactoring the repository to enhance its usability. Soon, you will be able to <strong>Install SussLLM via <code>pip install suss-llm</code></strong> and <strong>Utilize enhanced command-line functionality for easier access and operation</strong>.

</div>

<div align="center" style="margin: 20px 0 30px; padding: 10px; color: #004085; background-color: #cce5ff; border: 1px solid #b8daff; border-radius: .25rem;">

### ðŸš¨ Upcoming Release Alert ðŸš¨
**SussData**, the comprehensive dataset generated by SussLLM, will be **soon published on Zenodo** for public access and research use. 

</div>

## Overview

SussLLM is a Python-based simulation framework designed to model user search behavior using advanced large language models (LLMs). It generates realistic user profiles and search sessions to better understand and analyze how users interact with search engines.




## Quick Start

### Structure

```
sussllm/
â”‚
â”œâ”€â”€ sussllm/                              # Main package directory
â”‚   â”œâ”€â”€ __init__.py                       # Initialization script
â”‚   â”œâ”€â”€ profiles.py                       # User profile construction
â”‚   â”œâ”€â”€ simulation.py                     # Simulation process management
â”‚   â”œâ”€â”€ interaction.py                    # User interaction simulation
â”‚   â”œâ”€â”€ reasoning.py                      # LLM reasoning and action decision module
â”‚   â”œâ”€â”€ dataset.py                        # Dataset construction and management
â”‚   â”œâ”€â”€ train.py                          # Training the models
â”‚   â”œâ”€â”€ search/interfaces                 # Search interfaces and indexing
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ lucene/                       # Lucene indexing and BM25 search
â”‚   â”‚   â”œâ”€â”€ bing_search_engine.py         # Bing API search
â”‚   â”‚   â””â”€â”€ google_search_engine.py       # Google API search
â”‚   â”œâ”€â”€ utils/                            # Utility functions and classes
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ logger.py                     # Logging utility
â”‚   â”‚   â”œâ”€â”€ evaluation_metrics.py         # Evaluation utility
â”‚   â”‚   â””â”€â”€ helpers.py                    # Helper functions
â”‚   â”œâ”€â”€ llm_agent/                        # LLM-agents acting as users
â”‚   â”œâ”€â”€ user_profile/                     # User profile simulation
â”‚   â”‚   â”œâ”€â”€ behavioral/                   # User profile simulation using Behavioral-oriented approach
â”‚   â”‚   â””â”€â”€ component/                    # User profile simulation using Component-oriented approach
â”‚
â”œâ”€â”€ scripts/                              # Scripts for running simulations and analyses
â”‚   â”œâ”€â”€ run_simulation.py                 # Script to run simulations
â”‚   â””â”€â”€ evaluate_model.py                 # Evaluation script for IR tasks
â”‚
â”œâ”€â”€ models/                               # Directory for ML models
â”‚   â”œâ”€â”€ bm25_baseline.py                 
â”‚   â””â”€â”€ ranking_model.py
â”‚
â”œâ”€â”€ datasets/                             # Directory for storing datasets
â”‚   â”œâ”€â”€ aol/                
â”‚   â””â”€â”€ trec/
â”‚
â”œâ”€â”€ simulations/                          # Simulation output for User profiles and sessions
â”‚   â”œâ”€â”€ sussdata/                
â”‚   â””â”€â”€ user_profiles/
â”‚
â”œâ”€â”€ pyproject.toml                        # Poetry package and dependency management
â””â”€â”€ README.md                             # Project overview and usage instructions
```



## Features

- **User Profile Simulation**: Generate detailed user profiles based on behavioral and component-oriented attributes.
- **Search Session Simulation**: Simulate dynamic search sessions including queries, clicks, and decisions.
- **Reasoning with LLMs**: Integrate large language models to enhance simulation realism by generating user reasoning and decision-making processes.
- **Dataset Management**: Handle and manipulate datasets of simulated search sessions and real-world data.
- **Extensible**: Easily extendable for various simulation scenarios and different LLMs.

## Prerequisites

- Python 3.8 or higher
- Poetry for dependency management

## Configuration

Set your own API keys in the environment variables:
```bash
export OPENAI_API_KEY='your-openai-api-key'
export BING_API_KEY='your-bing-api-key' 
```

## Installation

First, clone the repository:

```bash
git clone https://github.com/saberzerhoudi/suss-llm.git
cd sussllm
```

Install the project dependencies using Poetry:

```bash
poetry install
```

## Usage

### Running Simulations

To run simulations, use the `run_simulation.py` script:

```bash
poetry run python scripts/run_simulation.py
```

This script generates user profiles, simulates their search sessions, and logs the output.

### Evaluating Models

To evaluate your IR models with the simulated data, use the `evaluate_model.py` script:

```bash
poetry run python scripts/evaluate_model.py
```

Ensure you have a trained model and a dataset path set correctly in the script.

